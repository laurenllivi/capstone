<!-- This partial template must be used on a template that you have passed the message_list variable to-->
<!-- inbox, view message, etc. -->
<!--  THIS IS A COPY OF THE TEMPLATE FOUND AT CAPSTONE/PARTIALS/_MESSAGE_LIST.HTML-->
<!-- I had to copy it in order to pass this html to the ajax success function that returns the search results-->


<script src="/static/js/django_messages.js"></script>


<div id="message-list-preview">
    <!-- I need this to be able to access a django variable containing the current url path for the search results -->
    <input type="hidden" id="current_url" name="current_url" value="{{ request.path }}">
    
    <div id="loadingDiv"><img src="/static/images/loadingSpinner.gif" id="loadingSpinner" /></div>
    
        {% for message in message_list %}
        <!-- the viewMessage() js function is in /static/js/django_messages.js -->
        <a href="javascript:void(0);" style="text-decoration: none; color: inherit" onclick='viewMessage({{ message.id }});'>
                <div class="message-preview" id="{{ message.id }}">
                    <span class="message_sender"><strong>{{ message.sender }}</strong></span><br>
                    <span class="message_sent_at" style="font-size: 14px">{{ message.sent_at }}</span><br>
                    <span class="message_subject" style="color: #4dac71">{{ message.subject }}</span><br>
                    <span class="message_body" style="font-size: 14px;">{{ message.body }}</span>
                </div><!-- inbox-preview -->
         </a> 
        {% endfor %}
    
    </div>
</div>